{"version":3,"sources":["webpack://react_ssr/./src/client/request.js","webpack://react_ssr/./src/components/Header/index.js","webpack://react_ssr/./src/containers/App.js","webpack://react_ssr/./src/containers/Counter/index.js","webpack://react_ssr/./src/containers/Home/index.js","webpack://react_ssr/./src/containers/User/detail.js","webpack://react_ssr/./src/containers/User/index.js","webpack://react_ssr/./src/routes.js","webpack://react_ssr/./src/server/render.js","webpack://react_ssr/./src/server/request.js","webpack://react_ssr/./src/store/action-type.js","webpack://react_ssr/./src/store/actions/counter.js","webpack://react_ssr/./src/store/actions/home.js","webpack://react_ssr/./src/store/index.js","webpack://react_ssr/./src/store/reducers/counter.js","webpack://react_ssr/./src/store/reducers/home.js","webpack://react_ssr/./src/store/reducers/index.js","webpack://react_ssr/./node_modules/eventemitter3/index.js","webpack://react_ssr/./node_modules/http-proxy-middleware/index.js","webpack://react_ssr/./node_modules/http-proxy-middleware/lib/config-factory.js","webpack://react_ssr/./node_modules/http-proxy-middleware/lib/context-matcher.js","webpack://react_ssr/./node_modules/http-proxy-middleware/lib/errors.js","webpack://react_ssr/./node_modules/http-proxy-middleware/lib/handlers.js","webpack://react_ssr/./node_modules/http-proxy-middleware/lib/index.js","webpack://react_ssr/./node_modules/http-proxy-middleware/lib/logger.js","webpack://react_ssr/./node_modules/http-proxy-middleware/lib/path-rewriter.js","webpack://react_ssr/./node_modules/http-proxy-middleware/lib/router.js","webpack://react_ssr/./node_modules/http-proxy/index.js","webpack://react_ssr/./node_modules/http-proxy/lib/http-proxy.js","webpack://react_ssr/./node_modules/http-proxy/lib/http-proxy/common.js","webpack://react_ssr/./node_modules/http-proxy/lib/http-proxy/index.js","webpack://react_ssr/./node_modules/http-proxy/lib/http-proxy/passes/web-incoming.js","webpack://react_ssr/./node_modules/http-proxy/lib/http-proxy/passes/web-outgoing.js","webpack://react_ssr/./node_modules/http-proxy/lib/http-proxy/passes/ws-incoming.js","webpack://react_ssr/./node_modules/koa-server-http-proxy/index.js","webpack://react_ssr/./node_modules/koa2-connect/dist/index.js","webpack://react_ssr/./node_modules/requires-port/index.js","webpack://react_ssr/external \"@babel/runtime/helpers/asyncToGenerator\"","webpack://react_ssr/external \"@babel/runtime/regenerator\"","webpack://react_ssr/external \"axios\"","webpack://react_ssr/external \"follow-redirects\"","webpack://react_ssr/external \"http\"","webpack://react_ssr/external \"https\"","webpack://react_ssr/external \"is-glob\"","webpack://react_ssr/external \"koa\"","webpack://react_ssr/external \"koa-router\"","webpack://react_ssr/external \"koa-static\"","webpack://react_ssr/external \"lodash\"","webpack://react_ssr/external \"micromatch\"","webpack://react_ssr/external \"react\"","webpack://react_ssr/external \"react-dom/server\"","webpack://react_ssr/external \"react-redux\"","webpack://react_ssr/external \"react-router-config\"","webpack://react_ssr/external \"react-router-dom\"","webpack://react_ssr/external \"redux\"","webpack://react_ssr/external \"redux-logger\"","webpack://react_ssr/external \"redux-thunk\"","webpack://react_ssr/external \"url\"","webpack://react_ssr/external \"util\"","webpack://react_ssr/webpack/bootstrap","webpack://react_ssr/webpack/runtime/compat get default export","webpack://react_ssr/webpack/runtime/define property getters","webpack://react_ssr/webpack/runtime/hasOwnProperty shorthand","webpack://react_ssr/webpack/runtime/make namespace object","webpack://react_ssr/./src/server/index.js"],"names":["axios","baseURL","Header","props","App","console","log","route","components","renderRoutes","routes","Counter","countHandler","number","add","connect","state","counter","actions","Home","useEffect","list","length","getHomeList","map","item","name","age","home","loadData","store","dispatch","UserDetail","User","path","component","exact","key","ctx","next","getServerStore","matchedRoutes","matchRoutes","promises","forEach","push","Promise","all","resolve","renderToString","html","body","JSON","stringify","getState","ADD","SET_HOME_LIST","type","types","request","get","then","result","data","payload","getClientStore","initState","window","context","createStore","reducers","applyMiddleware","thunk","clientRequest","logger","serverRequest","action","combineReducers","app","Koa","router","KoaRouter","use","proxy","target","pathRewrite","changeOrigin","koaStatic","process","cwd","render","listen"],"mappings":"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,yDAAyD,OAAO;AAChE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,SAAS;AAClD;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,eAAe,YAAY;AAC3B;;AAEA;AACA,2DAA2D;AAC3D,+DAA+D;AAC/D,mEAAmE;AACnE,uEAAuE;AACvE;AACA,0DAA0D,SAAS;AACnE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,2DAA2D,YAAY;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI,IAA6B;AACjC;AACA;;;;;;;;;;;AC/UA,UAAU,mBAAO,CAAC,gEAAO;;AAEzB;AACA;AACA;;;;;;;;;;;ACJA,QAAQ,mBAAO,CAAC,sBAAQ;AACxB,UAAU,mBAAO,CAAC,gBAAK;AACvB,aAAa,mBAAO,CAAC,oEAAU;AAC/B,aAAa,qGAA+B;;AAE5C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B,+BAA+B;AAC3D;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA,+CAA+C,eAAe;;AAE9D;AACA;AACA;AACA,4BAA4B,+BAA+B;AAC3D,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+BAA+B;AAC7D;AACA,YAAY,OAAO;AACnB,YAAY,EAAE;AACd,YAAY,QAAQ;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;AC9HA,QAAQ,mBAAO,CAAC,sBAAQ;AACxB,UAAU,mBAAO,CAAC,gBAAK;AACvB,aAAa,mBAAO,CAAC,wBAAS;AAC9B,iBAAiB,mBAAO,CAAC,8BAAY;AACrC,aAAa,mBAAO,CAAC,oEAAU;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA,iBAAiB,wBAAwB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;AC7FA;;AAEA;AACA,+EAA+E,iCAAiC;AAChH;AACA;AACA;AACA;;;;;;;;;;;ACPA,QAAQ,mBAAO,CAAC,sBAAQ;AACxB,aAAa,qGAA+B;;AAE5C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACzEA,QAAQ,mBAAO,CAAC,sBAAQ;AACxB,gBAAgB,mBAAO,CAAC,sDAAY;AACpC,oBAAoB,mBAAO,CAAC,oFAAkB;AAC9C,eAAe,mBAAO,CAAC,wEAAY;AACnC,qBAAqB,mBAAO,CAAC,sFAAmB;AAChD,mBAAmB,mBAAO,CAAC,kFAAiB;AAC5C,aAAa,mBAAO,CAAC,oEAAU;AAC/B,aAAa,qGAA+B;AAC5C,eAAe,kGAA4B;;AAE3C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC;;AAErC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;ACvJA,WAAW,mBAAO,CAAC,kBAAM;AACzB,QAAQ,mBAAO,CAAC,sBAAQ;;AAExB;;AAEA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,OAAO;AACrB,cAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;;;;;;;;;;;AC3KA,QAAQ,mBAAO,CAAC,sBAAQ;AACxB,aAAa,qGAA+B;AAC5C,aAAa,mBAAO,CAAC,oEAAU;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,SAAS,2BAA2B;AAChD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,0CAA0C;AAC1C;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA;;;;;;;;;;;ACxEA,QAAQ,mBAAO,CAAC,sBAAQ;AACxB,aAAa,wGAAkC;;AAE/C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,KAAK;AACL,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;;;;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2GAA4C,C;;;;;;;;;;ACZ5C;AACA,kBAAkB,4GAAuC;;;AAGzD;AACA;AACA;AACA;AACA;AACA,mCAAmC,KAAK;AACxC,cAAc,sCAAsC;AACpD;AACA,WAAW,OAAO;AAClB;AACA,YAAY,OAAO;AACnB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;;;;;;;;;;;;AChEA;AACA,eAAe,mBAAO,CAAC,gBAAK;AAC5B,eAAe,+CAAuB;AACtC,eAAe,mBAAO,CAAC,4DAAe;;AAEtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB;AACA,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,+CAA+C;AAChE;;AAEA;AACA,8BAA8B;;AAE9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,uCAAuC;AACjD;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,sCAAsC,0BAA0B;AAChE;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvPA;AACA,gBAAgB,+CAAuB;AACvC,gBAAgB,2CAAoB;AACpC,gBAAgB,mBAAO,CAAC,4DAAe;AACvC,gBAAgB,mBAAO,CAAC,kBAAM;AAC9B,gBAAgB,mBAAO,CAAC,oBAAO;AAC/B,gBAAgB,mBAAO,CAAC,8FAAuB;AAC/C,gBAAgB,mBAAO,CAAC,4FAAsB;;AAE9C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,YAAY,SAAS;AACrB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA,kBAAkB,mBAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;;AAEA;;AAEA,gDAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC,oBAAoB;;AAExD;AACA;AACA;;AAEA;AACA,4DAA4D,4BAA4B,EAAE;AAC1F;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;;;;;;;;;;ACxLA,mBAAmB,mBAAO,CAAC,kBAAM;AACjC,mBAAmB,mBAAO,CAAC,oBAAO;AAClC,aAAa,mBAAO,CAAC,uFAAgB;AACrC,aAAa,mBAAO,CAAC,qEAAW;AAChC,sBAAsB,mBAAO,CAAC,0CAAkB;;AAEhD;AACA;AACA,CAAC;;AAED,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,kBAAkB;AAC7C;;AAEA;AACA;AACA,4CAA4C;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kBAAkB,6CAA6C;;AAE/D;AACA,oBAAoB,kBAAkB;AACtC,qDAAqD,OAAO;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;;;;;;;;;;;ACjMA,aAAa,mBAAO,CAAC,gBAAK;AAC1B,aAAa,mBAAO,CAAC,qEAAW;;;AAGhC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;;AAElB;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B,aAAa,cAAc;AAC3B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wDAAwD;AACxD,mCAAmC;AACnC;;AAEA,sDAAsD;AACtD,iCAAiC;AACjC;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,gBAAgB;AAC7B,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;;;;;;;;;;AClJA,aAAa,mBAAO,CAAC,kBAAM;AAC3B,aAAa,mBAAO,CAAC,oBAAO;AAC5B,aAAa,mBAAO,CAAC,qEAAW;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;;;AAGA;AACA,4CAA4C;AAC5C;;AAEA;AACA,iBAAiB,iEAAiE;;AAElF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8CAA8C;AAC9C,KAAK;;AAEL,0BAA0B;;AAE1B;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjKY;;AAEZ,mBAAmB,mBAAO,CAAC,+DAAc;AACzC,kBAAkB,mBAAO,CAAC,4EAAuB;;AAEjD;AACA;;AAEA;AACA,eAAe;AACf;;AAEA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACjBa;AACb;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,YAAY;AACZ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE;AACP;AACA;;;;;;;;;;;;ACxJa;;AAEb;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACrCA,qE;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,iD;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,0C;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,kC;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA,IAAMQ,GAAG,GAAG,IAAIC,4CAAJ,EAAZ;AACA,IAAIC,MAAM,GAAG,IAAIC,mDAAJ,EAAb;AAEAH,GAAG,CAACI,GAAJ,CAAQC,4DAAK,CAAC,MAAD,EAAQ;AACnBC,QAAM,EAAC,uBADY;AAEnBC,aAAW,EAAC;AAAC,aAAQ;AAAT,GAFO;AAGnBC,cAAY,EAAC;AAHM,CAAR,CAAb;AAMAR,GAAG,CAACI,GAAJ,CAAQK,iDAAS,CAACC,OAAO,CAACC,GAAR,KAAgB,SAAjB,CAAjB;AACAX,GAAG,CAACI,GAAJ;AAAA,iLAAQ,iBAAO5C,GAAP,EAAWC,IAAX;AAAA;AAAA;AAAA;AAAA;AACNlC,mBAAO,CAACC,GAAR,CAAY,SAAZ,EAAsBgC,GAAG,CAACJ,IAA1B;;AADM,kBAEHI,GAAG,CAACJ,IAAJ,IAAU,cAFP;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAGEwD,gDAAM,CAACpD,GAAD,EAAKC,IAAL,CAHR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAR;;AAAA;AAAA;AAAA;AAAA,K,CAQA;AACA;AACA;;AAEAuC,GAAG,CAACa,MAAJ,CAAW,IAAX,EAAiB,YAAY;AAC3BtF,SAAO,CAACC,GAAR,CAAY,OAAZ;AACD,CAFD,E","file":"server.js","sourcesContent":["import axios from 'axios';\r\nexport default axios.create({\r\n    baseURL: '/'\r\n})","import React,{Fragment} from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst Header = (props)=>{\r\n  return(\r\n    <Fragment>\r\n      <div>\r\n        <ul>\r\n          <li>\r\n            <Link to=\"/\">Home</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/counter\">Counter</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/user\">user</Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/user/detail\">detail</Link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Header","import React,{Fragment} from 'react';\r\nimport {renderRoutes} from 'react-router-config';\r\nimport Header from '../components/Header'\r\nlet App = (props)=>{\r\n    console.log(props.route.components)\r\n    return(\r\n        <Fragment>\r\n            <Header />\r\n            {renderRoutes(props.route.routes)}\r\n          </Fragment>\r\n    )\r\n}\r\nexport default App;","import React,{useState} from 'react';\r\nimport {connect} from 'react-redux'\r\nimport actions from '../../store/actions/counter'\r\nconst Counter = (props)=>{\r\n  // const [number,setNumber] = useState(0)\r\n  const countHandler = ()=>{\r\n    console.log(111)\r\n    \r\n  }\r\n  return(\r\n    <div>\r\n        <p>{props.number}</p>\r\n      <button onClick={props.add}>+</button>\r\n    </div>\r\n  )\r\n}\r\nexport default connect((state)=>state.counter,actions)(Counter);","import React,{useEffect} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport actions from '../../store/actions/home';\r\n// class Home extends React.Component{\r\n//   componentDidMount(){\r\n//     this.props.getHomeList()\r\n//   }\r\n//   render(){\r\n//     return(\r\n//       <div>\r\n//         <ul>\r\n//           {props.list.map(item=>(\r\n//             <li key={item.name}>name:{item.name},age:{item.age}</li>\r\n//           ))\r\n//           }\r\n          \r\n//         </ul>\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\nlet Home = (props)=>{\r\n  useEffect(()=>{\r\n    if(props.list.length==0){\r\n      props.getHomeList()\r\n    }\r\n    \r\n  },[])\r\n  return(\r\n    <div>\r\n      <ul>\r\n        {props.list.map(item=>(\r\n          <li key={item.name}>name:{item.name},age:{item.age}</li>\r\n        ))\r\n        }\r\n        \r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n//此方法用来异步加载数据，将数据放到仓库中去\r\nHome = connect(state=>state.home,actions)(Home)\r\nHome.loadData = function(store){\r\n  console.log('store--',store)\r\n  // dispatch 派发的 就是一个action  return store.dispatch =>  return axios.get()  是一个promise\r\n   return store.dispatch(actions.getHomeList())\r\n}\r\n// Home = \r\nexport default Home;","import React, { Fragment } from 'react';\r\nconst UserDetail = () => {\r\n  return (\r\n    <div>user d</div>\r\n  )\r\n}\r\nexport default UserDetail","import React, { Fragment } from 'react';\r\nconst User = ()=>{\r\n  return(\r\n    <div>user list</div>\r\n  )\r\n}\r\nexport default User","import React, { Fragment } from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport Home from './containers/Home';\r\nimport Counter from './containers/Counter';\r\nimport User from './containers/User/index';\r\nimport UserDetail from './containers/User/detail';\r\nimport App from './containers/App';\r\nexport default [\r\n  {\r\n    path:'/',\r\n    component:App,\r\n\r\n    routes:[\r\n      {\r\n        path: '/',\r\n        component: Home,\r\n        exact: true,\r\n        key: 'home',\r\n        loadData: Home.loadData//服务端渲染需要加载异步数据\r\n      },\r\n      {\r\n        path: '/counter',\r\n        component: Counter,\r\n        key: 'login',\r\n      },\r\n      // {\r\n      //   path: '/user',\r\n      //   component: User,\r\n      //   key: '/user',\r\n        \r\n      //   routes: [\r\n      //     {\r\n      //       path: '/user/detail',\r\n      //       component: UserDetail,\r\n      //       key: '/user/detail',\r\n      //       exact: true,\r\n      //     }\r\n      //   ]\r\n      // },\r\n    ]\r\n  }\r\n]\r\n// export default (\r\n//   <Fragment>\r\n//     <Route path=\"/\" exact component={Home}></Route>\r\n//     <Route path=\"/counter\" exact component={Counter}></Route>\r\n//   </Fragment>\r\n// )","import React, { Fragment } from 'react';\r\nimport { renderToString } from 'react-dom/server';\r\nimport { StaticRouter, Route, matchPath } from 'react-router-dom'\r\nimport routes from '../routes';\r\nimport { renderRoutes,matchRoutes } from 'react-router-config';\r\nimport { Provider } from 'react-redux'\r\nimport { getServerStore } from '../store';\r\n\r\nexport default async function (ctx,next) {\r\n  let store = getServerStore(ctx);\r\n  \r\n  let matchedRoutes = matchRoutes(routes,ctx.path)\r\n  let promises=[];\r\n  console.log('matchedRoutes',matchedRoutes)\r\n  matchedRoutes.forEach(item => {\r\n\r\n    if (item.route.loadData) {\r\n      // console.dir(route.loadData())\r\n       promises.push(item.route.loadData(store))\r\n    }\r\n  })\r\n  await Promise.all(promises);\r\n    let html = await Promise.resolve(renderToString(\r\n      <Provider store={store}>\r\n        <StaticRouter context={{}} location={ctx.path}>\r\n          \r\n          {renderRoutes(routes)}\r\n        </StaticRouter>\r\n      </Provider>\r\n  \r\n    ))\r\n    ctx.body = `\r\n      <!DOCTYPE html>\r\n        <html lang=\"en\">\r\n        <head>\r\n          <meta charset=\"UTF-8\">\r\n          <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n          <title>Document</title>\r\n        </head>\r\n        <body>\r\n            <div id=\"root\">${html}</div>\r\n            <script>\r\n              window.context = {\r\n                state:${JSON.stringify(store.getState())}\r\n              }\r\n            </script>\r\n            <script src=\"/index.js\"></script>\r\n        </body>\r\n        </html>\r\n    `\r\n}","import axios from 'axios';\r\nexport default axios.create({\r\n    baseURL: 'http://loacalhost:4000/'\r\n})","export const ADD = 'ADD';\r\nexport const SET_HOME_LIST = 'SET_HOME_LIST';","import * as types from '../action-type';\r\nexport default {\r\n  add(){\r\n    return {type:types.ADD}\r\n  }\r\n}","import * as types from '../action-type';\r\nimport axios from 'axios'\r\nexport default {\r\n    getHomeList(){\r\n        //返回一个函数  store.dispatch(action)\r\n\r\n        \r\n        return function(dispatch,getState,request){ //redux-thunk 中间件\r\n            return request.get('/api/users').then(result=>{\r\n                // console.log(result)\r\n                let list  = result.data;\r\n                dispatch({\r\n                    type:types.SET_HOME_LIST,\r\n                    payload:list\r\n                })\r\n            })\r\n        }\r\n    }\r\n}","import {createStore,applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport logger from 'redux-logger';\r\nimport reducers from './reducers';\r\nimport clientRequest from '../client/request';\r\nimport serverRequest from '../server/request';\r\nexport function getClientStore(){\r\n    let initState = window.context.state;\r\n    return createStore(reducers,initState,applyMiddleware(thunk.withExtraArgument(clientRequest),logger))\r\n}\r\nexport function getServerStore(){\r\n    \r\n    return createStore(reducers,applyMiddleware(thunk.withExtraArgument(serverRequest),logger))\r\n}","import * as type from '../action-type';\r\nlet initState = {number:0}\r\nexport default function(state=initState,action){\r\n  switch (action.type) {\r\n    case type.ADD:\r\n      return {number:state.number+1}\r\n    default:\r\n      return state\r\n  }\r\n}","import * as type from '../action-type';\r\nlet initState = {list:[]}\r\nexport default function(state=initState,action){\r\n  switch (action.type) {\r\n    case type.SET_HOME_LIST:\r\n      return { list: action.payload }\r\n    default:\r\n      return state\r\n  }\r\n}","import {combineReducers} from 'redux';\r\nimport counter from './counter';\r\nimport home from './home';\r\n\r\nconst reducers = combineReducers({\r\n  counter,\r\n  home\r\n})\r\nexport default reducers;","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","var HPM = require('./lib')\n\nmodule.exports = function (context, opts) {\n  return new HPM(context, opts)\n}\n","var _ = require('lodash')\nvar url = require('url')\nvar ERRORS = require('./errors')\nvar logger = require('./logger').getInstance()\n\nmodule.exports = {\n  createConfig: createConfig\n}\n\nfunction createConfig (context, opts) {\n  // structure of config object to be returned\n  var config = {\n    context: undefined,\n    options: {}\n  }\n\n  // app.use('/api', proxy({target:'http://localhost:9000'}));\n  if (isContextless(context, opts)) {\n    config.context = '/'\n    config.options = _.assign(config.options, context)\n\n  // app.use('/api', proxy('http://localhost:9000'));\n  // app.use(proxy('http://localhost:9000/api'));\n  } else if (isStringShortHand(context)) {\n    var oUrl = url.parse(context)\n    var target = [oUrl.protocol, '//', oUrl.host].join('')\n\n    config.context = oUrl.pathname || '/'\n    config.options = _.assign(config.options, {target: target}, opts)\n\n    if (oUrl.protocol === 'ws:' || oUrl.protocol === 'wss:') {\n      config.options.ws = true\n    }\n  // app.use('/api', proxy({target:'http://localhost:9000'}));\n  } else {\n    config.context = context\n    config.options = _.assign(config.options, opts)\n  }\n\n  configureLogger(config.options)\n\n  if (!config.options.target) {\n    throw new Error(ERRORS.ERR_CONFIG_FACTORY_TARGET_MISSING)\n  }\n\n  // Legacy option.proxyHost\n  config.options = mapLegacyProxyHostOption(config.options)\n\n  // Legacy option.proxyTable > option.router\n  config.options = mapLegacyProxyTableOption(config.options)\n\n  return config\n}\n\n/**\n * Checks if a String only target/config is provided.\n * This can be just the host or with the optional path.\n *\n * @example\n *      app.use('/api', proxy('http://localhost:9000'));\n        app.use(proxy('http://localhost:9000/api'));\n *\n * @param  {String}  context [description]\n * @return {Boolean}         [description]\n */\nfunction isStringShortHand (context) {\n  if (_.isString(context)) {\n    return !!(url.parse(context).host)\n  }\n}\n\n/**\n * Checks if a Object only config is provided, without a context.\n * In this case the all paths will be proxied.\n *\n * @example\n *     app.use('/api', proxy({target:'http://localhost:9000'}));\n *\n * @param  {Object}  context [description]\n * @param  {*}       opts    [description]\n * @return {Boolean}         [description]\n */\nfunction isContextless (context, opts) {\n  return (_.isPlainObject(context) && _.isEmpty(opts))\n}\n\nfunction mapLegacyProxyHostOption (options) {\n  // set options.headers.host when option.proxyHost is provided\n  if (options.proxyHost) {\n    logger.warn('*************************************')\n    logger.warn('[HPM] Deprecated \"option.proxyHost\"')\n    logger.warn('      Use \"option.changeOrigin\" or \"option.headers.host\" instead')\n    logger.warn('      \"option.proxyHost\" will be removed in future release.')\n    logger.warn('*************************************')\n\n    options.headers = options.headers || {}\n    options.headers.host = options.proxyHost\n  }\n\n  return options\n}\n\n// Warn deprecated proxyTable api usage\nfunction mapLegacyProxyTableOption (options) {\n  if (options.proxyTable) {\n    logger.warn('*************************************')\n    logger.warn('[HPM] Deprecated \"option.proxyTable\"')\n    logger.warn('      Use \"option.router\" instead')\n    logger.warn('      \"option.proxyTable\" will be removed in future release.')\n    logger.warn('*************************************')\n\n    options.router = _.clone(options.proxyTable)\n    _.omit(options, 'proxyTable')\n  }\n\n  return options\n}\n\nfunction configureLogger (options) {\n  if (options.logLevel) {\n    logger.setLevel(options.logLevel)\n  }\n\n  if (options.logProvider) {\n    logger.setProvider(options.logProvider)\n  }\n}\n","var _ = require('lodash')\nvar url = require('url')\nvar isGlob = require('is-glob')\nvar micromatch = require('micromatch')\nvar ERRORS = require('./errors')\n\nmodule.exports = {\n  match: matchContext\n}\n\nfunction matchContext (context, uri, req) {\n  // single path\n  if (isStringPath(context)) {\n    return matchSingleStringPath(context, uri)\n  }\n\n  // single glob path\n  if (isGlobPath(context)) {\n    return matchSingleGlobPath(context, uri)\n  }\n\n  // multi path\n  if (Array.isArray(context)) {\n    if (context.every(isStringPath)) {\n      return matchMultiPath(context, uri)\n    }\n    if (context.every(isGlobPath)) {\n      return matchMultiGlobPath(context, uri)\n    }\n\n    throw new Error(ERRORS.ERR_CONTEXT_MATCHER_INVALID_ARRAY)\n  }\n\n  // custom matching\n  if (_.isFunction(context)) {\n    var pathname = getUrlPathName(uri)\n    return context(pathname, req)\n  }\n\n  throw new Error(ERRORS.ERR_CONTEXT_MATCHER_GENERIC)\n}\n\n/**\n * @param  {String} context '/api'\n * @param  {String} uri     'http://example.org/api/b/c/d.html'\n * @return {Boolean}\n */\nfunction matchSingleStringPath (context, uri) {\n  var pathname = getUrlPathName(uri)\n  return pathname.indexOf(context) === 0\n}\n\nfunction matchSingleGlobPath (pattern, uri) {\n  var pathname = getUrlPathName(uri)\n  var matches = micromatch(pathname, pattern)\n  return matches && (matches.length > 0)\n}\n\nfunction matchMultiGlobPath (patternList, uri) {\n  return matchSingleGlobPath(patternList, uri)\n}\n\n/**\n * @param  {String} contextList ['/api', '/ajax']\n * @param  {String} uri     'http://example.org/api/b/c/d.html'\n * @return {Boolean}\n */\nfunction matchMultiPath (contextList, uri) {\n  for (var i = 0; i < contextList.length; i++) {\n    var context = contextList[i]\n    if (matchSingleStringPath(context, uri)) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n * Parses URI and returns RFC 3986 path\n *\n * @param  {String} uri from req.url\n * @return {String}     RFC 3986 path\n */\nfunction getUrlPathName (uri) {\n  return uri && url.parse(uri).pathname\n}\n\nfunction isStringPath (context) {\n  return _.isString(context) && !isGlob(context)\n}\n\nfunction isGlobPath (context) {\n  return isGlob(context)\n}\n","/* eslint-disable max-len */\n\nmodule.exports = {\n  ERR_CONFIG_FACTORY_TARGET_MISSING: '[HPM] Missing \"target\" option. Example: {target: \"http://www.example.org\"}',\n  ERR_CONTEXT_MATCHER_GENERIC: '[HPM] Invalid context. Expecting something like: \"/api\" or [\"/api\", \"/ajax\"]',\n  ERR_CONTEXT_MATCHER_INVALID_ARRAY: '[HPM] Invalid context. Expecting something like: [\"/api\", \"/ajax\"] or [\"/api/**\", \"!**.html\"]',\n  ERR_PATH_REWRITER_CONFIG: '[HPM] Invalid pathRewrite config. Expecting object with pathRewrite config or a rewrite function'\n}\n","var _ = require('lodash')\nvar logger = require('./logger').getInstance()\n\nmodule.exports = {\n  init: init,\n  getHandlers: getProxyEventHandlers\n}\n\nfunction init (proxy, opts) {\n  var handlers = getProxyEventHandlers(opts)\n\n  _.forIn(handlers, function (handler, eventName) {\n    proxy.on(eventName, handlers[eventName])\n  })\n\n  logger.debug('[HPM] Subscribed to http-proxy events: ', _.keys(handlers))\n}\n\nfunction getProxyEventHandlers (opts) {\n  // https://github.com/nodejitsu/node-http-proxy#listening-for-proxy-events\n  var proxyEvents = ['error', 'proxyReq', 'proxyReqWs', 'proxyRes', 'open', 'close']\n  var handlers = {}\n\n  _.forEach(proxyEvents, function (event) {\n    // all handlers for the http-proxy events are prefixed with 'on'.\n    // loop through options and try to find these handlers\n    // and add them to the handlers object for subscription in init().\n    var eventName = _.camelCase('on ' + event)\n    var fnHandler = _.get(opts, eventName)\n\n    if (_.isFunction(fnHandler)) {\n      handlers[event] = fnHandler\n    }\n  })\n\n  // add default error handler in absence of error handler\n  if (!_.isFunction(handlers.error)) {\n    handlers.error = defaultErrorHandler\n  }\n\n  // add default close handler in absence of close handler\n  if (!_.isFunction(handlers.close)) {\n    handlers.close = logClose\n  }\n\n  return handlers\n}\n\nfunction defaultErrorHandler (err, req, res) {\n  var host = (req.headers && req.headers.host)\n  var code = err.code\n\n  if (res.writeHead && !res.headersSent) {\n    if (/HPE_INVALID/.test(code)) {\n      res.writeHead(502)\n    } else {\n      switch (code) {\n        case 'ECONNRESET':\n        case 'ENOTFOUND':\n        case 'ECONNREFUSED':\n          res.writeHead(504)\n          break\n        default: res.writeHead(500)\n      }\n    }\n  }\n\n  res.end('Error occured while trying to proxy to: ' + host + req.url)\n}\n\nfunction logClose (req, socket, head) {\n  // view disconnected websocket connections\n  logger.info('[HPM] Client disconnected')\n}\n","var _ = require('lodash')\nvar httpProxy = require('http-proxy')\nvar configFactory = require('./config-factory')\nvar handlers = require('./handlers')\nvar contextMatcher = require('./context-matcher')\nvar PathRewriter = require('./path-rewriter')\nvar Router = require('./router')\nvar logger = require('./logger').getInstance()\nvar getArrow = require('./logger').getArrow\n\nmodule.exports = HttpProxyMiddleware\n\nfunction HttpProxyMiddleware (context, opts) {\n  // https://github.com/chimurai/http-proxy-middleware/issues/57\n  var wsUpgradeDebounced = _.debounce(handleUpgrade)\n  var wsInitialized = false\n  var config = configFactory.createConfig(context, opts)\n  var proxyOptions = config.options\n\n  // create proxy\n  var proxy = httpProxy.createProxyServer({})\n  logger.info('[HPM] Proxy created:', config.context, ' -> ', proxyOptions.target)\n\n  var pathRewriter = PathRewriter.create(proxyOptions.pathRewrite) // returns undefined when \"pathRewrite\" is not provided\n\n  // attach handler to http-proxy events\n  handlers.init(proxy, proxyOptions)\n\n  // log errors for debug purpose\n  proxy.on('error', logError)\n\n  // https://github.com/chimurai/http-proxy-middleware/issues/19\n  // expose function to upgrade externally\n  middleware.upgrade = wsUpgradeDebounced\n\n  return middleware\n\n  function middleware (req, res, next) {\n    if (shouldProxy(config.context, req)) {\n      var activeProxyOptions = prepareProxyRequest(req)\n      proxy.web(req, res, activeProxyOptions)\n    } else {\n      next()\n    }\n\n    if (proxyOptions.ws === true) {\n      // use initial request to access the server object to subscribe to http upgrade event\n      catchUpgradeRequest(req.connection.server)\n    }\n  }\n\n  function catchUpgradeRequest (server) {\n    // subscribe once; don't subscribe on every request...\n    // https://github.com/chimurai/http-proxy-middleware/issues/113\n    if (!wsInitialized) {\n      server.on('upgrade', wsUpgradeDebounced)\n      wsInitialized = true\n    }\n  }\n\n  function handleUpgrade (req, socket, head) {\n    // set to initialized when used externally\n    wsInitialized = true\n\n    if (shouldProxy(config.context, req)) {\n      var activeProxyOptions = prepareProxyRequest(req)\n      proxy.ws(req, socket, head, activeProxyOptions)\n      logger.info('[HPM] Upgrading to WebSocket')\n    }\n  }\n\n  /**\n   * Determine whether request should be proxied.\n   *\n   * @private\n   * @param  {String} context [description]\n   * @param  {Object} req     [description]\n   * @return {Boolean}\n   */\n  function shouldProxy (context, req) {\n    var path = (req.originalUrl || req.url)\n    return contextMatcher.match(context, path, req)\n  }\n\n  /**\n   * Apply option.router and option.pathRewrite\n   * Order matters:\n   *    Router uses original path for routing;\n   *    NOT the modified path, after it has been rewritten by pathRewrite\n   * @param {Object} req\n   * @return {Object} proxy options\n   */\n  function prepareProxyRequest (req) {\n    // https://github.com/chimurai/http-proxy-middleware/issues/17\n    // https://github.com/chimurai/http-proxy-middleware/issues/94\n    req.url = (req.originalUrl || req.url)\n\n    // store uri before it gets rewritten for logging\n    var originalPath = req.url\n    var newProxyOptions = _.assign({}, proxyOptions)\n\n    // Apply in order:\n    // 1. option.router\n    // 2. option.pathRewrite\n    __applyRouter(req, newProxyOptions)\n    __applyPathRewrite(req, pathRewriter)\n\n    // debug logging for both http(s) and websockets\n    if (proxyOptions.logLevel === 'debug') {\n      var arrow = getArrow(originalPath, req.url, proxyOptions.target, newProxyOptions.target)\n      logger.debug('[HPM] %s %s %s %s', req.method, originalPath, arrow, newProxyOptions.target)\n    }\n\n    return newProxyOptions\n  }\n\n  // Modify option.target when router present.\n  function __applyRouter (req, options) {\n    var newTarget\n\n    if (options.router) {\n      newTarget = Router.getTarget(req, options)\n\n      if (newTarget) {\n        logger.debug('[HPM] Router new target: %s -> \"%s\"', options.target, newTarget)\n        options.target = newTarget\n      }\n    }\n  }\n\n  // rewrite path\n  function __applyPathRewrite (req, pathRewriter) {\n    if (pathRewriter) {\n      var path = pathRewriter(req.url, req)\n\n      if (typeof path === 'string') {\n        req.url = path\n      } else {\n        logger.info('[HPM] pathRewrite: No rewritten path found. (%s)', req.url)\n      }\n    }\n  }\n\n  function logError (err, req, res) {\n    var hostname = (req.headers && req.headers.host) || (req.hostname || req.host) // (websocket) || (node0.10 || node 4/5)\n    var target = proxyOptions.target.host || proxyOptions.target\n    var errorMessage = '[HPM] Error occurred while trying to proxy request %s from %s to %s (%s) (%s)'\n    var errReference = 'https://nodejs.org/api/errors.html#errors_common_system_errors' // link to Node Common Systems Errors page\n\n    logger.error(errorMessage, req.url, hostname, target, err.code, errReference)\n  }\n}\n","var util = require('util')\nvar _ = require('lodash')\n\nvar loggerInstance\n\nvar defaultProvider = {\n  log: console.log,\n  debug: console.log, // use .log(); since console does not have .debug()\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n}\n\n// log level 'weight'\nvar LEVELS = {\n  debug: 10,\n  info: 20,\n  warn: 30,\n  error: 50,\n  silent: 80\n}\n\nmodule.exports = {\n  // singleton\n  getInstance: function () {\n    if (!loggerInstance) {\n      loggerInstance = new Logger()\n    }\n\n    return loggerInstance\n  },\n  getArrow: getArrow\n}\n\nfunction Logger () {\n  var logLevel\n  var provider\n\n  var api = {\n    log: log,\n    debug: debug,\n    info: info,\n    warn: warn,\n    error: error,\n    setLevel: function (v) {\n      if (isValidLevel(v)) {\n        logLevel = v\n      }\n    },\n    setProvider: function (fn) {\n      if (fn && isValidProvider(fn)) {\n        provider = fn(defaultProvider)\n      }\n    }\n  }\n\n  init()\n\n  return api\n\n  function init () {\n    api.setLevel('info')\n    api.setProvider(function () {\n      return defaultProvider\n    })\n  }\n\n  // log will log messages, regardless of logLevels\n  function log () {\n    provider.log(_interpolate.apply(null, arguments))\n  }\n\n  function debug () {\n    if (_showLevel('debug')) {\n      provider.debug(_interpolate.apply(null, arguments))\n    }\n  }\n\n  function info () {\n    if (_showLevel('info')) {\n      provider.info(_interpolate.apply(null, arguments))\n    }\n  }\n\n  function warn () {\n    if (_showLevel('warn')) {\n      provider.warn(_interpolate.apply(null, arguments))\n    }\n  }\n\n  function error () {\n    if (_showLevel('error')) {\n      provider.error(_interpolate.apply(null, arguments))\n    }\n  }\n\n  /**\n   * Decide to log or not to log, based on the log levels 'weight'\n   * @param  {String}  showLevel [debug, info, warn, error, silent]\n   * @return {Boolean}\n   */\n  function _showLevel (showLevel) {\n    var result = false\n    var currentLogLevel = LEVELS[logLevel]\n\n    if (currentLogLevel && (currentLogLevel <= LEVELS[showLevel])) {\n      result = true\n    }\n\n    return result\n  }\n\n  // make sure logged messages and its data are return interpolated\n  // make it possible for additional log data, such date/time or custom prefix.\n  function _interpolate () {\n    var fn = _.spread(util.format)\n    var result = fn(_.slice(arguments))\n\n    return result\n  }\n\n  function isValidProvider (fnProvider) {\n    var result = true\n\n    if (fnProvider && !_.isFunction(fnProvider)) {\n      throw new Error('[HPM] Log provider config error. Expecting a function.')\n    }\n\n    return result\n  }\n\n  function isValidLevel (levelName) {\n    var validLevels = _.keys(LEVELS)\n    var isValid = _.includes(validLevels, levelName)\n\n    if (!isValid) {\n      throw new Error('[HPM] Log level error. Invalid logLevel.')\n    }\n\n    return isValid\n  }\n}\n\n/**\n * -> normal proxy\n * => router\n * ~> pathRewrite\n * ≈> router + pathRewrite\n *\n * @param  {String} originalPath\n * @param  {String} newPath\n * @param  {String} originalTarget\n * @param  {String} newTarget\n * @return {String}\n */\nfunction getArrow (originalPath, newPath, originalTarget, newTarget) {\n  var arrow = ['>']\n  var isNewTarget = (originalTarget !== newTarget) // router\n  var isNewPath = (originalPath !== newPath) // pathRewrite\n\n  if (isNewPath && !isNewTarget) {\n    arrow.unshift('~')\n  } else if (!isNewPath && isNewTarget) {\n    arrow.unshift('=')\n  } else if (isNewPath && isNewTarget) {\n    arrow.unshift('≈')\n  } else {\n    arrow.unshift('-')\n  }\n\n  return arrow.join('')\n}\n","var _ = require('lodash')\nvar logger = require('./logger').getInstance()\nvar ERRORS = require('./errors')\n\nmodule.exports = {\n  create: createPathRewriter\n}\n\n/**\n * Create rewrite function, to cache parsed rewrite rules.\n *\n * @param {Object} rewriteConfig\n * @return {Function} Function to rewrite paths; This function should accept `path` (request.url) as parameter\n */\nfunction createPathRewriter (rewriteConfig) {\n  var rulesCache\n\n  if (!isValidRewriteConfig(rewriteConfig)) {\n    return\n  }\n\n  if (_.isFunction(rewriteConfig)) {\n    var customRewriteFn = rewriteConfig\n    return customRewriteFn\n  } else {\n    rulesCache = parsePathRewriteRules(rewriteConfig)\n    return rewritePath\n  }\n\n  function rewritePath (path) {\n    var result = path\n\n    _.forEach(rulesCache, function (rule) {\n      if (rule.regex.test(path)) {\n        result = result.replace(rule.regex, rule.value)\n        logger.debug('[HPM] Rewriting path from \"%s\" to \"%s\"', path, result)\n        return false\n      }\n    })\n\n    return result\n  }\n}\n\nfunction isValidRewriteConfig (rewriteConfig) {\n  if (_.isFunction(rewriteConfig)) {\n    return true\n  } else if (!_.isEmpty(rewriteConfig) && _.isPlainObject(rewriteConfig)) {\n    return true\n  } else if (_.isUndefined(rewriteConfig) ||\n               _.isNull(rewriteConfig) ||\n               _.isEqual(rewriteConfig, {})) {\n    return false\n  } else {\n    throw new Error(ERRORS.ERR_PATH_REWRITER_CONFIG)\n  }\n}\n\nfunction parsePathRewriteRules (rewriteConfig) {\n  var rules = []\n\n  if (_.isPlainObject(rewriteConfig)) {\n    _.forIn(rewriteConfig, function (value, key) {\n      rules.push({\n        regex: new RegExp(key),\n        value: rewriteConfig[key]\n      })\n      logger.info('[HPM] Proxy rewrite rule created: \"%s\" ~> \"%s\"', key, rewriteConfig[key])\n    })\n  }\n\n  return rules\n}\n","var _ = require('lodash')\nvar logger = require('./logger.js').getInstance()\n\nmodule.exports = {\n  getTarget: getTarget\n}\n\nfunction getTarget (req, config) {\n  var newTarget\n  var router = config.router\n\n  if (_.isPlainObject(router)) {\n    newTarget = getTargetFromProxyTable(req, router)\n  } else if (_.isFunction(router)) {\n    newTarget = router(req)\n  }\n\n  return newTarget\n}\n\nfunction getTargetFromProxyTable (req, table) {\n  var result\n  var host = req.headers.host\n  var path = req.url\n\n  var hostAndPath = host + path\n\n  _.forIn(table, function (value, key) {\n    if (containsPath(key)) {\n      if (hostAndPath.indexOf(key) > -1) { // match 'localhost:3000/api'\n        result = table[key]\n        logger.debug('[HPM] Router table match: \"%s\"', key)\n        return false\n      }\n    } else {\n      if (key === host) { // match 'localhost:3000'\n        result = table[key]\n        logger.debug('[HPM] Router table match: \"%s\"', host)\n        return false\n      }\n    }\n  })\n\n  return result\n}\n\nfunction containsPath (v) {\n  return v.indexOf('/') > -1\n}\n","/*!\n * Caron dimonio, con occhi di bragia\n * loro accennando, tutte le raccoglie;\n * batte col remo qualunque s’adagia \n *\n * Charon the demon, with the eyes of glede,\n * Beckoning to them, collects them all together,\n * Beats with his oar whoever lags behind\n *          \n *          Dante - The Divine Comedy (Canto III)\n */\n\nmodule.exports = require('./lib/http-proxy');"," // Use explicit /index.js to help browserify negociation in require '/lib/http-proxy' (!)\nvar ProxyServer = require('./http-proxy/index.js').Server;\n\n\n/**\n * Creates the proxy server.\n *\n * Examples:\n *\n *    httpProxy.createProxyServer({ .. }, 8000)\n *    // => '{ web: [Function], ws: [Function] ... }'\n *\n * @param {Object} Options Config object passed to the proxy\n *\n * @return {Object} Proxy Proxy object with handlers for `ws` and `web` requests\n *\n * @api public\n */\n\n\nfunction createProxyServer(options) {\n  /*\n   *  `options` is needed and it must have the following layout:\n   *\n   *  {\n   *    target : <url string to be parsed with the url module>\n   *    forward: <url string to be parsed with the url module>\n   *    agent  : <object to be passed to http(s).request>\n   *    ssl    : <object to be passed to https.createServer()>\n   *    ws     : <true/false, if you want to proxy websockets>\n   *    xfwd   : <true/false, adds x-forward headers>\n   *    secure : <true/false, verify SSL certificate>\n   *    toProxy: <true/false, explicitly specify if we are proxying to another proxy>\n   *    prependPath: <true/false, Default: true - specify whether you want to prepend the target's path to the proxy path>\n   *    ignorePath: <true/false, Default: false - specify whether you want to ignore the proxy path of the incoming request>\n   *    localAddress : <Local interface string to bind for outgoing connections>\n   *    changeOrigin: <true/false, Default: false - changes the origin of the host header to the target URL>\n   *    preserveHeaderKeyCase: <true/false, Default: false - specify whether you want to keep letter case of response header key >\n   *    auth   : Basic authentication i.e. 'user:password' to compute an Authorization header.\n   *    hostRewrite: rewrites the location hostname on (201/301/302/307/308) redirects, Default: null.\n   *    autoRewrite: rewrites the location host/port on (201/301/302/307/308) redirects based on requested host/port. Default: false.\n   *    protocolRewrite: rewrites the location protocol on (201/301/302/307/308) redirects to 'http' or 'https'. Default: null.\n   *  }\n   *\n   *  NOTE: `options.ws` and `options.ssl` are optional.\n   *    `options.target and `options.forward` cannot be\n   *    both missing\n   *  }\n   */\n\n  return new ProxyServer(options);\n}\n\n\nProxyServer.createProxyServer = createProxyServer;\nProxyServer.createServer      = createProxyServer;\nProxyServer.createProxy       = createProxyServer;\n\n\n\n\n/**\n * Export the proxy \"Server\" as the main export.\n */\nmodule.exports = ProxyServer;\n\n","var common   = exports,\n    url      = require('url'),\n    extend   = require('util')._extend,\n    required = require('requires-port');\n\nvar upgradeHeader = /(^|,)\\s*upgrade\\s*($|,)/i,\n    isSSL = /^https|wss/;\n\n/**\n * Simple Regex for testing if protocol is https\n */\ncommon.isSSL = isSSL;\n/**\n * Copies the right headers from `options` and `req` to\n * `outgoing` which is then used to fire the proxied\n * request.\n *\n * Examples:\n *\n *    common.setupOutgoing(outgoing, options, req)\n *    // => { host: ..., hostname: ...}\n *\n * @param {Object} Outgoing Base object to be filled with required properties\n * @param {Object} Options Config object passed to the proxy\n * @param {ClientRequest} Req Request Object\n * @param {String} Forward String to select forward or target\n * \n * @return {Object} Outgoing Object with all required properties set\n *\n * @api private\n */\n\ncommon.setupOutgoing = function(outgoing, options, req, forward) {\n  outgoing.port = options[forward || 'target'].port ||\n                  (isSSL.test(options[forward || 'target'].protocol) ? 443 : 80);\n\n  ['host', 'hostname', 'socketPath', 'pfx', 'key',\n    'passphrase', 'cert', 'ca', 'ciphers', 'secureProtocol'].forEach(\n    function(e) { outgoing[e] = options[forward || 'target'][e]; }\n  );\n\n  outgoing.method = options.method || req.method;\n  outgoing.headers = extend({}, req.headers);\n\n  if (options.headers){\n    extend(outgoing.headers, options.headers);\n  }\n\n  if (options.auth) {\n    outgoing.auth = options.auth;\n  }\n  \n  if (options.ca) {\n      outgoing.ca = options.ca;\n  }\n\n  if (isSSL.test(options[forward || 'target'].protocol)) {\n    outgoing.rejectUnauthorized = (typeof options.secure === \"undefined\") ? true : options.secure;\n  }\n\n\n  outgoing.agent = options.agent || false;\n  outgoing.localAddress = options.localAddress;\n\n  //\n  // Remark: If we are false and not upgrading, set the connection: close. This is the right thing to do\n  // as node core doesn't handle this COMPLETELY properly yet.\n  //\n  if (!outgoing.agent) {\n    outgoing.headers = outgoing.headers || {};\n    if (typeof outgoing.headers.connection !== 'string'\n        || !upgradeHeader.test(outgoing.headers.connection)\n       ) { outgoing.headers.connection = 'close'; }\n  }\n\n\n  // the final path is target path + relative path requested by user:\n  var target = options[forward || 'target'];\n  var targetPath = target && options.prependPath !== false\n    ? (target.path || '')\n    : '';\n\n  //\n  // Remark: Can we somehow not use url.parse as a perf optimization?\n  //\n  var outgoingPath = !options.toProxy\n    ? (url.parse(req.url).path || '')\n    : req.url;\n\n  //\n  // Remark: ignorePath will just straight up ignore whatever the request's\n  // path is. This can be labeled as FOOT-GUN material if you do not know what\n  // you are doing and are using conflicting options.\n  //\n  outgoingPath = !options.ignorePath ? outgoingPath : '';\n\n  outgoing.path = common.urlJoin(targetPath, outgoingPath);\n\n  if (options.changeOrigin) {\n    outgoing.headers.host =\n      required(outgoing.port, options[forward || 'target'].protocol) && !hasPort(outgoing.host)\n        ? outgoing.host + ':' + outgoing.port\n        : outgoing.host;\n  }\n  return outgoing;\n};\n\n/**\n * Set the proper configuration for sockets,\n * set no delay and set keep alive, also set\n * the timeout to 0.\n *\n * Examples:\n *\n *    common.setupSocket(socket)\n *    // => Socket\n *\n * @param {Socket} Socket instance to setup\n * \n * @return {Socket} Return the configured socket.\n *\n * @api private\n */\n\ncommon.setupSocket = function(socket) {\n  socket.setTimeout(0);\n  socket.setNoDelay(true);\n\n  socket.setKeepAlive(true, 0);\n\n  return socket;\n};\n\n/**\n * Get the port number from the host. Or guess it based on the connection type.\n *\n * @param {Request} req Incoming HTTP request.\n *\n * @return {String} The port number.\n *\n * @api private\n */\ncommon.getPort = function(req) {\n  var res = req.headers.host ? req.headers.host.match(/:(\\d+)/) : '';\n\n  return res ?\n    res[1] :\n    common.hasEncryptedConnection(req) ? '443' : '80';\n};\n\n/**\n * Check if the request has an encrypted connection.\n *\n * @param {Request} req Incoming HTTP request.\n *\n * @return {Boolean} Whether the connection is encrypted or not.\n *\n * @api private\n */\ncommon.hasEncryptedConnection = function(req) {\n  return Boolean(req.connection.encrypted || req.connection.pair);\n};\n\n/**\n * OS-agnostic join (doesn't break on URLs like path.join does on Windows)>\n *\n * @return {String} The generated path.\n *\n * @api private\n */\n\ncommon.urlJoin = function() {\n    //\n    // We do not want to mess with the query string. All we want to touch is the path.\n    //\n  var args = Array.prototype.slice.call(arguments),\n      lastIndex = args.length - 1,\n      last = args[lastIndex],\n      lastSegs = last.split('?'),\n      retSegs;\n\n  args[lastIndex] = lastSegs.shift();\n\n  //\n  // Join all strings, but remove empty strings so we don't get extra slashes from\n  // joining e.g. ['', 'am']\n  //\n  retSegs = [\n    args.filter(Boolean).join('/')\n        .replace(/\\/+/g, '/')\n        .replace('http:/', 'http://')\n        .replace('https:/', 'https://')\n  ];\n\n  // Only join the query string if it exists so we don't have trailing a '?'\n  // on every request\n\n  // Handle case where there could be multiple ? in the URL.\n  retSegs.push.apply(retSegs, lastSegs);\n\n  return retSegs.join('?')\n};\n\n/**\n * Rewrites or removes the domain of a cookie header\n *\n * @param {String|Array} Header\n * @param {Object} Config, mapping of domain to rewritten domain.\n *                 '*' key to match any domain, null value to remove the domain.\n *\n * @api private\n */\ncommon.rewriteCookieProperty = function rewriteCookieProperty(header, config, property) {\n  if (Array.isArray(header)) {\n    return header.map(function (headerElement) {\n      return rewriteCookieProperty(headerElement, config, property);\n    });\n  }\n  return header.replace(new RegExp(\"(;\\\\s*\" + property + \"=)([^;]+)\", 'i'), function(match, prefix, previousValue) {\n    var newValue;\n    if (previousValue in config) {\n      newValue = config[previousValue];\n    } else if ('*' in config) {\n      newValue = config['*'];\n    } else {\n      //no match, return previous value\n      return match;\n    }\n    if (newValue) {\n      //replace value\n      return prefix + newValue;\n    } else {\n      //remove value\n      return '';\n    }\n  });\n};\n\n/**\n * Check the host and see if it potentially has a port in it (keep it simple)\n *\n * @returns {Boolean} Whether we have one or not\n *\n * @api private\n */\nfunction hasPort(host) {\n  return !!~host.indexOf(':');\n};\n","var httpProxy = module.exports,\n    extend    = require('util')._extend,\n    parse_url = require('url').parse,\n    EE3       = require('eventemitter3'),\n    http      = require('http'),\n    https     = require('https'),\n    web       = require('./passes/web-incoming'),\n    ws        = require('./passes/ws-incoming');\n\nhttpProxy.Server = ProxyServer;\n\n/**\n * Returns a function that creates the loader for\n * either `ws` or `web`'s  passes.\n *\n * Examples:\n *\n *    httpProxy.createRightProxy('ws')\n *    // => [Function]\n *\n * @param {String} Type Either 'ws' or 'web'\n * \n * @return {Function} Loader Function that when called returns an iterator for the right passes\n *\n * @api private\n */\n\nfunction createRightProxy(type) {\n\n  return function(options) {\n    return function(req, res /*, [head], [opts] */) {\n      var passes = (type === 'ws') ? this.wsPasses : this.webPasses,\n          args = [].slice.call(arguments),\n          cntr = args.length - 1,\n          head, cbl;\n\n      /* optional args parse begin */\n      if(typeof args[cntr] === 'function') {\n        cbl = args[cntr];\n\n        cntr--;\n      }\n\n      var requestOptions = options;\n      if(\n        !(args[cntr] instanceof Buffer) &&\n        args[cntr] !== res\n      ) {\n        //Copy global options\n        requestOptions = extend({}, options);\n        //Overwrite with request options\n        extend(requestOptions, args[cntr]);\n\n        cntr--;\n      }\n\n      if(args[cntr] instanceof Buffer) {\n        head = args[cntr];\n      }\n\n      /* optional args parse end */\n\n      ['target', 'forward'].forEach(function(e) {\n        if (typeof requestOptions[e] === 'string')\n          requestOptions[e] = parse_url(requestOptions[e]);\n      });\n\n      if (!requestOptions.target && !requestOptions.forward) {\n        return this.emit('error', new Error('Must provide a proper URL as target'));\n      }\n\n      for(var i=0; i < passes.length; i++) {\n        /**\n         * Call of passes functions\n         * pass(req, res, options, head)\n         *\n         * In WebSockets case the `res` variable\n         * refer to the connection socket\n         * pass(req, socket, options, head)\n         */\n        if(passes[i](req, res, requestOptions, head, this, cbl)) { // passes can return a truthy value to halt the loop\n          break;\n        }\n      }\n    };\n  };\n}\nhttpProxy.createRightProxy = createRightProxy;\n\nfunction ProxyServer(options) {\n  EE3.call(this);\n\n  options = options || {};\n  options.prependPath = options.prependPath === false ? false : true;\n\n  this.web = this.proxyRequest           = createRightProxy('web')(options);\n  this.ws  = this.proxyWebsocketRequest  = createRightProxy('ws')(options);\n  this.options = options;\n\n  this.webPasses = Object.keys(web).map(function(pass) {\n    return web[pass];\n  });\n\n  this.wsPasses = Object.keys(ws).map(function(pass) {\n    return ws[pass];\n  });\n\n  this.on('error', this.onError, this);\n\n}\n\nrequire('util').inherits(ProxyServer, EE3);\n\nProxyServer.prototype.onError = function (err) {\n  //\n  // Remark: Replicate node core behavior using EE3\n  // so we force people to handle their own errors\n  //\n  if(this.listeners('error').length === 1) {\n    throw err;\n  }\n};\n\nProxyServer.prototype.listen = function(port, hostname) {\n  var self    = this,\n      closure = function(req, res) { self.web(req, res); };\n\n  this._server  = this.options.ssl ?\n    https.createServer(this.options.ssl, closure) :\n    http.createServer(closure);\n\n  if(this.options.ws) {\n    this._server.on('upgrade', function(req, socket, head) { self.ws(req, socket, head); });\n  }\n\n  this._server.listen(port, hostname);\n\n  return this;\n};\n\nProxyServer.prototype.close = function(callback) {\n  var self = this;\n  if (this._server) {\n    this._server.close(done);\n  }\n\n  // Wrap callback to nullify server after all open connections are closed.\n  function done() {\n    self._server = null;\n    if (callback) {\n      callback.apply(null, arguments);\n    }\n  };\n};\n\nProxyServer.prototype.before = function(type, passName, callback) {\n  if (type !== 'ws' && type !== 'web') {\n    throw new Error('type must be `web` or `ws`');\n  }\n  var passes = (type === 'ws') ? this.wsPasses : this.webPasses,\n      i = false;\n\n  passes.forEach(function(v, idx) {\n    if(v.name === passName) i = idx;\n  })\n\n  if(i === false) throw new Error('No such pass');\n\n  passes.splice(i, 0, callback);\n};\nProxyServer.prototype.after = function(type, passName, callback) {\n  if (type !== 'ws' && type !== 'web') {\n    throw new Error('type must be `web` or `ws`');\n  }\n  var passes = (type === 'ws') ? this.wsPasses : this.webPasses,\n      i = false;\n\n  passes.forEach(function(v, idx) {\n    if(v.name === passName) i = idx;\n  })\n\n  if(i === false) throw new Error('No such pass');\n\n  passes.splice(i++, 0, callback);\n};\n","var httpNative   = require('http'),\n    httpsNative  = require('https'),\n    web_o  = require('./web-outgoing'),\n    common = require('../common'),\n    followRedirects = require('follow-redirects');\n\nweb_o = Object.keys(web_o).map(function(pass) {\n  return web_o[pass];\n});\n\nvar nativeAgents = { http: httpNative, https: httpsNative };\n\n/*!\n * Array of passes.\n *\n * A `pass` is just a function that is executed on `req, res, options`\n * so that you can easily add new checks while still keeping the base\n * flexible.\n */\n\n\nmodule.exports = {\n\n  /**\n   * Sets `content-length` to '0' if request is of DELETE type.\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {IncomingMessage} Res Response object\n   * @param {Object} Options Config object passed to the proxy\n   *\n   * @api private\n   */\n\n  deleteLength: function deleteLength(req, res, options) {\n    if((req.method === 'DELETE' || req.method === 'OPTIONS')\n       && !req.headers['content-length']) {\n      req.headers['content-length'] = '0';\n      delete req.headers['transfer-encoding'];\n    }\n  },\n\n  /**\n   * Sets timeout in request socket if it was specified in options.\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {IncomingMessage} Res Response object\n   * @param {Object} Options Config object passed to the proxy\n   *\n   * @api private\n   */\n\n  timeout: function timeout(req, res, options) {\n    if(options.timeout) {\n      req.socket.setTimeout(options.timeout);\n    }\n  },\n\n  /**\n   * Sets `x-forwarded-*` headers if specified in config.\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {IncomingMessage} Res Response object\n   * @param {Object} Options Config object passed to the proxy\n   *\n   * @api private\n   */\n\n  XHeaders: function XHeaders(req, res, options) {\n    if(!options.xfwd) return;\n\n    var encrypted = req.isSpdy || common.hasEncryptedConnection(req);\n    var values = {\n      for  : req.connection.remoteAddress || req.socket.remoteAddress,\n      port : common.getPort(req),\n      proto: encrypted ? 'https' : 'http'\n    };\n\n    ['for', 'port', 'proto'].forEach(function(header) {\n      req.headers['x-forwarded-' + header] =\n        (req.headers['x-forwarded-' + header] || '') +\n        (req.headers['x-forwarded-' + header] ? ',' : '') +\n        values[header];\n    });\n\n    req.headers['x-forwarded-host'] = req.headers['x-forwarded-host'] || req.headers['host'] || '';\n  },\n\n  /**\n   * Does the actual proxying. If `forward` is enabled fires up\n   * a ForwardStream, same happens for ProxyStream. The request\n   * just dies otherwise.\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {IncomingMessage} Res Response object\n   * @param {Object} Options Config object passed to the proxy\n   *\n   * @api private\n   */\n\n  stream: function stream(req, res, options, _, server, clb) {\n\n    // And we begin!\n    server.emit('start', req, res, options.target || options.forward);\n\n    var agents = options.followRedirects ? followRedirects : nativeAgents;\n    var http = agents.http;\n    var https = agents.https;\n\n    if(options.forward) {\n      // If forward enable, so just pipe the request\n      var forwardReq = (options.forward.protocol === 'https:' ? https : http).request(\n        common.setupOutgoing(options.ssl || {}, options, req, 'forward')\n      );\n\n      // error handler (e.g. ECONNRESET, ECONNREFUSED)\n      // Handle errors on incoming request as well as it makes sense to\n      var forwardError = createErrorHandler(forwardReq, options.forward);\n      req.on('error', forwardError);\n      forwardReq.on('error', forwardError);\n\n      (options.buffer || req).pipe(forwardReq);\n      if(!options.target) { return res.end(); }\n    }\n\n    // Request initalization\n    var proxyReq = (options.target.protocol === 'https:' ? https : http).request(\n      common.setupOutgoing(options.ssl || {}, options, req)\n    );\n\n    // Enable developers to modify the proxyReq before headers are sent\n    proxyReq.on('socket', function(socket) {\n      if(server && !proxyReq.getHeader('expect')) {\n        server.emit('proxyReq', proxyReq, req, res, options);\n      }\n    });\n\n    // allow outgoing socket to timeout so that we could\n    // show an error page at the initial request\n    if(options.proxyTimeout) {\n      proxyReq.setTimeout(options.proxyTimeout, function() {\n         proxyReq.abort();\n      });\n    }\n\n    // Ensure we abort proxy if request is aborted\n    req.on('aborted', function () {\n      proxyReq.abort();\n    });\n\n    // handle errors in proxy and incoming request, just like for forward proxy\n    var proxyError = createErrorHandler(proxyReq, options.target);\n    req.on('error', proxyError);\n    proxyReq.on('error', proxyError);\n\n    function createErrorHandler(proxyReq, url) {\n      return function proxyError(err) {\n        if (req.socket.destroyed && err.code === 'ECONNRESET') {\n          server.emit('econnreset', err, req, res, url);\n          return proxyReq.abort();\n        }\n\n        if (clb) {\n          clb(err, req, res, url);\n        } else {\n          server.emit('error', err, req, res, url);\n        }\n      }\n    }\n\n    (options.buffer || req).pipe(proxyReq);\n\n    proxyReq.on('response', function(proxyRes) {\n      if(server) { server.emit('proxyRes', proxyRes, req, res); }\n\n      if(!res.headersSent && !options.selfHandleResponse) {\n        for(var i=0; i < web_o.length; i++) {\n          if(web_o[i](req, res, proxyRes, options)) { break; }\n        }\n      }\n\n      if (!res.finished) {\n        // Allow us to listen when the proxy has completed\n        proxyRes.on('end', function () {\n          if (server) server.emit('end', req, res, proxyRes);\n        });\n        // We pipe to the response unless its expected to be handled by the user\n        if (!options.selfHandleResponse) proxyRes.pipe(res);\n      } else {\n        if (server) server.emit('end', req, res, proxyRes);\n      }\n    });\n  }\n\n};\n","var url    = require('url'),\n    common = require('../common');\n\n\nvar redirectRegex = /^201|30(1|2|7|8)$/;\n\n/*!\n * Array of passes.\n *\n * A `pass` is just a function that is executed on `req, res, options`\n * so that you can easily add new checks while still keeping the base\n * flexible.\n */\n\nmodule.exports = { // <--\n\n  /**\n   * If is a HTTP 1.0 request, remove chunk headers\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {IncomingMessage} Res Response object\n   * @param {proxyResponse} Res Response object from the proxy request\n   *\n   * @api private\n   */\n  removeChunked: function removeChunked(req, res, proxyRes) {\n    if (req.httpVersion === '1.0') {\n      delete proxyRes.headers['transfer-encoding'];\n    }\n  },\n\n  /**\n   * If is a HTTP 1.0 request, set the correct connection header\n   * or if connection header not present, then use `keep-alive`\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {IncomingMessage} Res Response object\n   * @param {proxyResponse} Res Response object from the proxy request\n   *\n   * @api private\n   */\n  setConnection: function setConnection(req, res, proxyRes) {\n    if (req.httpVersion === '1.0') {\n      proxyRes.headers.connection = req.headers.connection || 'close';\n    } else if (req.httpVersion !== '2.0' && !proxyRes.headers.connection) {\n      proxyRes.headers.connection = req.headers.connection || 'keep-alive';\n    }\n  },\n\n  setRedirectHostRewrite: function setRedirectHostRewrite(req, res, proxyRes, options) {\n    if ((options.hostRewrite || options.autoRewrite || options.protocolRewrite)\n        && proxyRes.headers['location']\n        && redirectRegex.test(proxyRes.statusCode)) {\n      var target = url.parse(options.target);\n      var u = url.parse(proxyRes.headers['location']);\n\n      // make sure the redirected host matches the target host before rewriting\n      if (target.host != u.host) {\n        return;\n      }\n\n      if (options.hostRewrite) {\n        u.host = options.hostRewrite;\n      } else if (options.autoRewrite) {\n        u.host = req.headers['host'];\n      }\n      if (options.protocolRewrite) {\n        u.protocol = options.protocolRewrite;\n      }\n\n      proxyRes.headers['location'] = u.format();\n    }\n  },\n  /**\n   * Copy headers from proxyResponse to response\n   * set each header in response object.\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {IncomingMessage} Res Response object\n   * @param {proxyResponse} Res Response object from the proxy request\n   * @param {Object} Options options.cookieDomainRewrite: Config to rewrite cookie domain\n   *\n   * @api private\n   */\n  writeHeaders: function writeHeaders(req, res, proxyRes, options) {\n    var rewriteCookieDomainConfig = options.cookieDomainRewrite,\n        rewriteCookiePathConfig = options.cookiePathRewrite,\n        preserveHeaderKeyCase = options.preserveHeaderKeyCase,\n        rawHeaderKeyMap,\n        setHeader = function(key, header) {\n          if (header == undefined) return;\n          if (rewriteCookieDomainConfig && key.toLowerCase() === 'set-cookie') {\n            header = common.rewriteCookieProperty(header, rewriteCookieDomainConfig, 'domain');\n          }\n          if (rewriteCookiePathConfig && key.toLowerCase() === 'set-cookie') {\n            header = common.rewriteCookieProperty(header, rewriteCookiePathConfig, 'path');\n          }\n          res.setHeader(String(key).trim(), header);\n        };\n\n    if (typeof rewriteCookieDomainConfig === 'string') { //also test for ''\n      rewriteCookieDomainConfig = { '*': rewriteCookieDomainConfig };\n    }\n\n    if (typeof rewriteCookiePathConfig === 'string') { //also test for ''\n      rewriteCookiePathConfig = { '*': rewriteCookiePathConfig };\n    }\n\n    // message.rawHeaders is added in: v0.11.6\n    // https://nodejs.org/api/http.html#http_message_rawheaders\n    if (preserveHeaderKeyCase && proxyRes.rawHeaders != undefined) {\n      rawHeaderKeyMap = {};\n      for (var i = 0; i < proxyRes.rawHeaders.length; i += 2) {\n        var key = proxyRes.rawHeaders[i];\n        rawHeaderKeyMap[key.toLowerCase()] = key;\n      }\n    }\n\n    Object.keys(proxyRes.headers).forEach(function(key) {\n      var header = proxyRes.headers[key];\n      if (preserveHeaderKeyCase && rawHeaderKeyMap) {\n        key = rawHeaderKeyMap[key] || key;\n      }\n      setHeader(key, header);\n    });\n  },\n\n  /**\n   * Set the statusCode from the proxyResponse\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {IncomingMessage} Res Response object\n   * @param {proxyResponse} Res Response object from the proxy request\n   *\n   * @api private\n   */\n  writeStatusCode: function writeStatusCode(req, res, proxyRes) {\n    // From Node.js docs: response.writeHead(statusCode[, statusMessage][, headers])\n    if(proxyRes.statusMessage) {\n      res.statusCode = proxyRes.statusCode;\n      res.statusMessage = proxyRes.statusMessage;\n    } else {\n      res.statusCode = proxyRes.statusCode;\n    }\n  }\n\n};\n","var http   = require('http'),\n    https  = require('https'),\n    common = require('../common');\n\n/*!\n * Array of passes.\n *\n * A `pass` is just a function that is executed on `req, socket, options`\n * so that you can easily add new checks while still keeping the base\n * flexible.\n */\n\n/*\n * Websockets Passes\n *\n */\n\n\nmodule.exports = {\n  /**\n   * WebSocket requests must have the `GET` method and\n   * the `upgrade:websocket` header\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {Socket} Websocket\n   *\n   * @api private\n   */\n\n  checkMethodAndHeader : function checkMethodAndHeader(req, socket) {\n    if (req.method !== 'GET' || !req.headers.upgrade) {\n      socket.destroy();\n      return true;\n    }\n\n    if (req.headers.upgrade.toLowerCase() !== 'websocket') {\n      socket.destroy();\n      return true;\n    }\n  },\n\n  /**\n   * Sets `x-forwarded-*` headers if specified in config.\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {Socket} Websocket\n   * @param {Object} Options Config object passed to the proxy\n   *\n   * @api private\n   */\n\n  XHeaders : function XHeaders(req, socket, options) {\n    if(!options.xfwd) return;\n\n    var values = {\n      for  : req.connection.remoteAddress || req.socket.remoteAddress,\n      port : common.getPort(req),\n      proto: common.hasEncryptedConnection(req) ? 'wss' : 'ws'\n    };\n\n    ['for', 'port', 'proto'].forEach(function(header) {\n      req.headers['x-forwarded-' + header] =\n        (req.headers['x-forwarded-' + header] || '') +\n        (req.headers['x-forwarded-' + header] ? ',' : '') +\n        values[header];\n    });\n  },\n\n  /**\n   * Does the actual proxying. Make the request and upgrade it\n   * send the Switching Protocols request and pipe the sockets.\n   *\n   * @param {ClientRequest} Req Request object\n   * @param {Socket} Websocket\n   * @param {Object} Options Config object passed to the proxy\n   *\n   * @api private\n   */\n  stream : function stream(req, socket, options, head, server, clb) {\n\n    var createHttpHeader = function(line, headers) {\n      return Object.keys(headers).reduce(function (head, key) {\n        var value = headers[key];\n\n        if (!Array.isArray(value)) {\n          head.push(key + ': ' + value);\n          return head;\n        }\n\n        for (var i = 0; i < value.length; i++) {\n          head.push(key + ': ' + value[i]);\n        }\n        return head;\n      }, [line])\n      .join('\\r\\n') + '\\r\\n\\r\\n';\n    }\n\n    common.setupSocket(socket);\n\n    if (head && head.length) socket.unshift(head);\n\n\n    var proxyReq = (common.isSSL.test(options.target.protocol) ? https : http).request(\n      common.setupOutgoing(options.ssl || {}, options, req)\n    );\n\n    // Enable developers to modify the proxyReq before headers are sent\n    if (server) { server.emit('proxyReqWs', proxyReq, req, socket, options, head); }\n\n    // Error Handler\n    proxyReq.on('error', onOutgoingError);\n    proxyReq.on('response', function (res) {\n      // if upgrade event isn't going to happen, close the socket\n      if (!res.upgrade) {\n        socket.write(createHttpHeader('HTTP/' + res.httpVersion + ' ' + res.statusCode + ' ' + res.statusMessage, res.headers));\n        res.pipe(socket);\n      }\n    });\n\n    proxyReq.on('upgrade', function(proxyRes, proxySocket, proxyHead) {\n      proxySocket.on('error', onOutgoingError);\n\n      // Allow us to listen when the websocket has completed\n      proxySocket.on('end', function () {\n        server.emit('close', proxyRes, proxySocket, proxyHead);\n      });\n\n      // The pipe below will end proxySocket if socket closes cleanly, but not\n      // if it errors (eg, vanishes from the net and starts returning\n      // EHOSTUNREACH). We need to do that explicitly.\n      socket.on('error', function () {\n        proxySocket.end();\n      });\n\n      common.setupSocket(proxySocket);\n\n      if (proxyHead && proxyHead.length) proxySocket.unshift(proxyHead);\n\n      //\n      // Remark: Handle writing the headers to the socket when switching protocols\n      // Also handles when a header is an array\n      //\n      socket.write(createHttpHeader('HTTP/1.1 101 Switching Protocols', proxyRes.headers));\n\n      proxySocket.pipe(socket).pipe(proxySocket);\n\n      server.emit('open', proxySocket);\n      server.emit('proxySocket', proxySocket);  //DEPRECATED.\n    });\n\n    return proxyReq.end(); // XXX: CHECK IF THIS IS THIS CORRECT\n\n    function onOutgoingError(err) {\n      if (clb) {\n        clb(err, req, socket);\n      } else {\n        server.emit('error', err, req, socket);\n      }\n      socket.end();\n    }\n  }\n};\n","'use strict'\r\n\r\nconst koaConnect = require('koa2-connect')\r\nconst httpProxy = require('http-proxy-middleware')\r\n\r\nmodule.exports = function(context, options) {\r\n  var proxy\r\n\r\n  if (typeof options == 'string') {\r\n    options = { target: options }\r\n  }\r\n\r\n  proxy = httpProxy(context, options)\r\n\r\n  return async function(ctx, next) {\r\n    await koaConnect(proxy)(ctx, next)\r\n  }\r\n}\r\n\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\r\n    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n/**\r\n * Inject raw response, so we can know if middleware has responsed.\r\n */\r\nfunction makeInjectedResponse(koaCtx, /*markHandled,*/ whenEnded) {\r\n    var res = koaCtx.res;\r\n    res.on('close', whenEnded).on('finish', whenEnded);\r\n    var dummyRes = Object.create(res);\r\n    [\r\n        'setHeader',\r\n        'writeHead',\r\n        'write',\r\n        'end'\r\n    ].forEach(function (name) {\r\n        dummyRes[name] = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            res[name].apply(res, args);\r\n            // koa2.0 initial assign statusCode to 404, reset to 200\r\n            if (res.statusCode === 404) {\r\n                res.statusCode = 200;\r\n            }\r\n            // markHandled();\r\n        };\r\n    });\r\n    [\r\n        'statusCode',\r\n        'statusMessage'\r\n    ].forEach(function (name) {\r\n        dummyRes.__defineSetter__(name, function (value) {\r\n            res[name] = value;\r\n            // markHandled();\r\n        });\r\n    });\r\n    return dummyRes;\r\n}\r\n/**\r\n * The middleware function does include the `next` callback so only resolve\r\n * the Promise when it's called. If it's never called, the middleware stack\r\n * completion will stall\r\n */\r\nfunction handler(ctx, connectMiddleware) {\r\n    return new Promise(function (resolve, reject) {\r\n        // let hasHandled = false;\r\n        // (req, res)\r\n        var args = [\r\n            ctx.req,\r\n            makeInjectedResponse(ctx, \r\n            // () => {\r\n            //   // hasHandled = true;\r\n            // },\r\n            function () {\r\n                resolve(false);\r\n            })\r\n        ];\r\n        var assumeSync = true;\r\n        // (req, res, next) or (err, req, res, next)\r\n        if (connectMiddleware.length >= 3) {\r\n            args.push(function (err) {\r\n                if (err)\r\n                    reject(err);\r\n                else\r\n                    resolve(true);\r\n            });\r\n            assumeSync = false;\r\n        }\r\n        // (err, req, res, next)\r\n        if (connectMiddleware.length >= 4) {\r\n            args.unshift(null);\r\n        }\r\n        connectMiddleware.apply(void 0, args);\r\n        /**\r\n         * If the middleware function does not declare receiving the `next` callback\r\n         * assume that it's synchronous.\r\n         */\r\n        if (assumeSync /*&& !hasHandled*/) {\r\n            resolve(true);\r\n        }\r\n    });\r\n}\r\n/**\r\n * Returns a Koa middleware function that varies its async logic based on if the\r\n * given middleware function declares at least 3 parameters, i.e. includes\r\n * the `next` callback function\r\n */\r\nfunction koaConnect(connectMiddleware) {\r\n    var _this = this;\r\n    return function (ctx, next) { return __awaiter(_this, void 0, void 0, function () {\r\n        var goNext, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ctx.respond = false;\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, , 4]);\r\n                    return [4 /*yield*/, handler(ctx, connectMiddleware)];\r\n                case 2:\r\n                    goNext = _a.sent();\r\n                    if (goNext) {\r\n                        ctx.respond = true;\r\n                        return [2 /*return*/, next()];\r\n                    }\r\n                    return [3 /*break*/, 4];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    ctx.respond = true;\r\n                    throw err_1;\r\n                case 4:\r\n                    ;\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); };\r\n}\r\nmodule.exports = koaConnect;\r\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");;","module.exports = require(\"@babel/runtime/regenerator\");;","module.exports = require(\"axios\");;","module.exports = require(\"follow-redirects\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"is-glob\");;","module.exports = require(\"koa\");;","module.exports = require(\"koa-router\");;","module.exports = require(\"koa-static\");;","module.exports = require(\"lodash\");;","module.exports = require(\"micromatch\");;","module.exports = require(\"react\");;","module.exports = require(\"react-dom/server\");;","module.exports = require(\"react-redux\");;","module.exports = require(\"react-router-config\");;","module.exports = require(\"react-router-dom\");;","module.exports = require(\"redux\");;","module.exports = require(\"redux-logger\");;","module.exports = require(\"redux-thunk\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\r\nimport Koa from 'koa';\r\nimport KoaRouter from 'koa-router';\r\nimport koaStatic from 'koa-static';\r\nimport render from './render';\r\nimport proxy from 'koa-server-http-proxy';\r\nconst app = new Koa();\r\nlet router = new KoaRouter()\r\n\r\napp.use(proxy(\"/api\",{\r\n  target:\"http://localhost:4000\",\r\n  pathRewrite:{'^/api':'/api'},\r\n  changeOrigin:true\r\n}));\r\n\r\napp.use(koaStatic(process.cwd() + '/public'))\r\napp.use(async (ctx,next)=>{\r\n  console.log('=======',ctx.path)\r\n  if(ctx.path!='/favicon.ico'){\r\n    await render(ctx,next)\r\n  }\r\n  \r\n})\r\n\r\n// app.use(router.routes())\r\n// app.use(router.allowedMethods());\r\n// console.log(process.cwd())\r\n\r\napp.listen(9000, function () {\r\n  console.log('start')\r\n})"],"sourceRoot":""}